--- glibc-2.3.4/linuxthreads/Makefile.orig	2004-12-02 23:55:00.000000000 +0100
+++ glibc-2.3.4/linuxthreads/Makefile	2005-01-27 10:49:54.000000000 +0100
@@ -79,6 +79,11 @@
 
 include ../Makeconfig
 
+ifeq ($(build-omitfp),yes)
+CFLAGS-.o := $(filter-out -fomit-frame-pointer, $(CFLAGS-.o))
+CFLAGS-.os := $(filter-out -fomit-frame-pointer, $(CFLAGS-.os))
+endif
+
 ifeq ($(build-shared),yes)
 
 # Set the `multidir' variable by grabbing the variable from the compiler.
